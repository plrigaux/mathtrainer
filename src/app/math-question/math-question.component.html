<div class="content">
  <h2 class="mat-h2">Question&nbsp;{{questionId}}</h2>
  <div class="mathQuestion">

    <ng-container *ngIf="stacked else flat">
      <section class="question_column">
        <section class="operator">{{problem.mathProplemActions.operator}}</section>
        <section class="numbers">
          <div class="number" *ngFor="let number of problem.values; i as index; last as last">
            <div class="digit" *ngFor="let digit of number.toString().split('')">{{digit}}</div>
          </div>
        </section>
      </section>
      <hr class="hr_equals" />
      <ng-container *ngTemplateOutlet="answerField"></ng-container>
    </ng-container>

    <ng-template #flat>
      <section class="question_flat">
        <ng-template ngFor let-num [ngForOf]="problem.values" let-i="index" let-last="last">
          <span class="number_flat">{{num}}</span>
          <span *ngIf="last==false" class="operator">{{problem.mathProplemActions.operator}}</span>
        </ng-template>
        <span class="equals">=</span>
        <ng-container *ngTemplateOutlet="answerField"></ng-container>
      </section>
      
    </ng-template>
  </div>
</div>

<ng-template #answerField>
  <div class="answerField">
    <app-column-answer
      [id]='questionId'
      [size]='size'
      [mode]='config.answerMode'
      [value]='userInput'
      [valueChange]="onValueChange"
      (focusChange)="onFocusChange($event)"
      [answerStatus]="status"></app-column-answer>
  </div>
</ng-template>