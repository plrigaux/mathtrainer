<app-progress-bar [totalCount]="totalCount" [progressCount]="index"></app-progress-bar>
<div class="main-div">
  <mat-card class="center">
    <div class="progressBar">
      <mat-card-title *ngIf="tasks && index < tasks.length" i18n="@@progressionMessage">
        {{index + 1}} of {{tasks.length}}
      </mat-card-title>
    </div>
    <button mat-raised-button color="accent" *ngIf="status == WorkoutStatusEnum.Begin" (click)="start()"
      i18n="@@startButton">Start</button>
    <div class="mathQuestion" *ngIf="status == WorkoutStatusEnum.Work">
      <span [ngClass]="{'equation':true, 'stacked': stacked}">
        <ng-template ngFor let-num [ngForOf]="currentTask.values" let-i="index" let-last="last">
          <span class="number">{{num}}</span>
          <span *ngIf="last==false" class="operator">{{currentTask.operator}}</span>
        </ng-template>
        <span class="equals">=</span>
        <input #answerField [(ngModel)]="userInput" autofocus="autofocus" autocomplete="off" placeholder="?"
          (keypress)="typeKey($event)" (keyup)="check($event)" type="number" autofocus />
      </span>
    </div>
    <div *ngIf="status == WorkoutStatusEnum.Finish">
      <mat-card-title i18n="finished">Finished</mat-card-title>
      <table class="results">
        <thead>
          <tr>
            <th>No</th>
            <th>Equation</th>
            <th>Answer</th>
            <th>Time</th>
            <th>Mistakes</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let task of tasks, let i = index">
            <td>{{i + 1}}</td>
            <td>{{task.problem.question}}</td>
            <td>{{task.answer}}</td>
            <td>{{task.getTimeInSec()}} sec.</td>
            <td>{{task.errors}}</td>
          </tr>
        </tbody>
      </table>
      <mat-card-actions>
        <button mat-raised-button color="accent" (click)="start()" i18n="@@startAgainButton">Start again</button>
      </mat-card-actions>
    </div>
  </mat-card>
</div>